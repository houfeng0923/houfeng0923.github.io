
> 框架不是用于组织代码的工具。它们是组织你思想的工具。
> == Rich Harris ==


## 2018年12月团队框架选型

目前团队前端技术栈（ember 为主）与社区主流技术方案交集太少，ember 社区活跃度不高，在技术趋势学习交流、开源组件利用、招聘成本 等方面有一定影响。
所以希望在后续新项目开发中，拥抱流行技术栈 ，提高团队技术竞争力。

## 考虑因素

* 框架性能 （业务强需求）
* 开发生态
* 过渡成本（学习、理解成本）
* 灵活度 （对复杂场景的支持，组件扩展，开发支持）
* 开发体验

## 备选方案

- vue
- react
- angular


## 对比


### react

react 通过 vdom 解决了 View（跨端）渲染问题。 项目开发需要配合生态中的 状态管理套件、router 等 libs 协同解决项目技术需求。
react 目前生态系统最活跃。解决各种问题的 libs， ui 等都比较丰富；开发需要面对的问题往往是选择性成本。
另外，react 及生态在思路上倾向函数式编程，主流的 redux（状态管理）倡导操纵 immutable 数据，以提高数据状态可控性和 react 工作性能。这一点上，**与现有开发模式和开发思路是不同的，团队的话需要一个转换过程。**

**性能方案，react 只能说不慢（某些基准测试在 vue 和 ember 之间），但也给开发者很大的灵活度来思考数据结构，组织数据，进一步优化性能。也就是说，react 可以做到很快，但需要些成本。**

不得不说的是 ，基于 vdom 的 react 确实很 cool。提出了新的编程思路来解决问题，实际项目中需要有一定的折腾精神，对技术提升有更大意义。

关于数据状态管理：目前有两个比较流行 redux vs mobx。 redux 建立在 immutable 数据之上，提供了更多的约束、约定来定义、变更状态，编程模型简单但繁琐，复杂的异步问题需要通过中间件解决，增加了些成本。另外，对照我们的实际项目需求，汇率变更非常频繁的场景下，immutable 数据的方案会产生大量的临时对象等待 gc，平均内存占用会更高（实际体验对性能的影响倒是不大）。鉴于其数据更可控，适合复杂业务下的大团队协作；
mobx 建立在 mutable 数据上，编程习惯与 ember 相近，但社区还没有更好的案例来印证 mobx 在中大型项目的维护性、调试、性能上的表现。据说还有些坑，所以还不打算应用于业务项目。

### angular

类似 ember，一站式框架，大而全。相比 vue 和 react，国内生态不是很活跃。是搭建重型复杂 SPA 应用的有力解决方案。
特点是延续了 google 一贯学院派风格，偏向 Java 的工程思路，**学习和掌握的门槛更高**。
集成 rxjs， 在很多情景下（如数据订阅）解决问题方案很简洁。但有些担心函数式的思路在项目中对开发成本，管理和维护的影响。
默认 TypeScript （也有 dart 版本），对长周期项目维护有利，需要团队学习掌握，前期会影响开发产出效率。长远看对团队技术进步、编码风格有利。

**性能方面，在某个基准测试中表现不错。 angular 做了很多编译输出的优化。但按照目前对框架中变更检测逻辑的理解，实际项目的表现与其他响应式解决方案应该差不多，由于框架理解成本高，进一步优化的成本也较高。**


### vue

vue 融合了 早期 angularjs 数据绑定的特性，又吸收了 react vdom 的特性不断进化，既具备响应式的精准更新，又提供了跨端的可能性。在国内社区中表现更活跃，国内文档和资料相比其他方案更有亲和力。实用至上，保持了轻快，简洁的开发体验。所以 **vue 的学习掌握成本对比其他方案低很多**。

在构建复杂项目上，vue 也提供了类似 react +redux 的方案， 不同的是，  **vue 与 ember 类似， 通过响应式系统自动收集依赖，与现有编程思路一致，迁移成本低。而且 vue 更简洁，智能，开发体验优于 ember 很多。在极端复杂的业务场景下，功能可能会不足。**

**性能方面， vue 在某些基准测试中表现优于 angular 和 react（虽然 测试不能代表实际表现），按目前对 vue 方案的理解， 实际表现不会低于 react。**

### 与 ember 比较

ember 是比以上三大主流框架更早的存在。 历史悠久~ 。 早期确实有很大的竞争力来应对现有的业务需求，但由于 ember 开发者和社区对框架兼容性过于保守，很多新的语言特性并没有及时的吸收，繁琐的 api 一直在兼容。选择的脚手架工具也非主流。但从框架提供的功能、技术方案看，并没有太大的缺失和落后。可惜没有大公司的背书，社区一直也没有壮大，良好生态一直没有形成。（主观）

**关于 ember 的性能，一些基准测试上看，ember 表现最差，但实际上，并非是采用 ember 最佳的使用方式。而且 ember 不是很 care 这些测试；ember 有自己的一套机制来保证性能不慢。与 react 相比，同等开发成本下，ember 确实也比较省心。**

## Vue

几个框架都很有特色，有一定的受众，都蛮值得尝试的。之前更多是在 react 和 vue 两个方案上一直摇摆。对 react 的实际性能表现和开发过程做了几次尝试，也是形成以上对比分析的实践结果。

**目前我个人倾向基于 【Vue】 来构建后续的业务系统： 团队开发习惯迁移成本低、性能表现优秀、学习曲线平缓、更容易深入、足够的灵活性**

对于原有业务系统，继续延续 ember 的技术栈架构，持续优化、升级。

另外，之前开发的 chart，部分基于 react 构建，这也是之前在 react 和 vue 之间摇摆的原因之一。现在想法是：chart 就作为一个独立的 lib 来维护和升级，也作为 react 的探索窗口，后续计划升级新版本提升性能、基于 react 重构 canvas 等工作。






